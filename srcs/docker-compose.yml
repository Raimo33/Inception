version: '3.8'

services:
	nginx:
		build:
			context: ./requirements/nginx
		container_name: nginx
		ports: #expose the ports of the container to the host
			- "443:443"
			- "80:80"
		environment: #environment variables exported after the image is built
			- DOMAIN_NAME=craimond.42.fr
			- SSL_CERTIFICATE=/etc/ssl/certs/craimond.42.fr.crt
			- SSL_CERTIFICATE_KEY=/etc/ssl/private/craimond.42.fr.key
		networks: #define the network that this container will be using (containers in the same network can communicate with each other)
			- webnet
		volumes: #link the local files to the container (allowing access at runtime), :ro means read only
			- ./requirements/nginx/conf/nginx.conf:/etc/nginx/conf.d/nginx.conf:ro
			- ./requirements/nginx/craimond.42.frs/craimond.42.fr.crt:/etc/ssl/craimond.42.frs/craimond.42.fr.crt:ro
			- ./requirements/nginx/craimond.42.frs/craimond.42.fr.key:/etc/ssl/private/craimond.42.fr.key:ro

  # mariadb:
	#   build:
	#     context: ./requirements/mariadb
	#   container_name: mariadb
	#   environment:
	#     - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
	#     - MYSQL_USER=${MYSQL_USER}
	#     - MYSQL_PASSWORD=${MYSQL_PASSWORD}
	#     - MYSQL_DATABASE=${MYSQL_DATABASE}
	#   volumes:
	#     - mariadb_data:/var/lib/mysql
	#   networks:
	#     - webnet

	# wordpress:
	#   build:
	#     context: ./requirements/wordpress
	#   container_name: wordpress
	#   environment:
	#     - WORDPRESS_DB_HOST=${WORDPRESS_DB_HOST}
	#     - WORDPRESS_DB_USER=${WORDPRESS_DB_USER}
	#     - WORDPRESS_DB_PASSWORD=${WORDPRESS_DB_PASSWORD}
	#     - WORDPRESS_DB_NAME=${WORDPRESS_DB_NAME}
	#   volumes:
	#     - wordpress_data:/var/www/html
	#   networks:
	#     - webnet


volumes:
  # wordpress_data:
  # mariadb_data:

networks:
  webnet:
		driver: bridge
